<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gulf Andhra - Saudi Arabia News</title>
    <!-- Include Font Awesome for icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA==" crossorigin="anonymous" referrerpolicy="no-referrer">
    <!-- Include the separate styles file (adjust path as needed) -->
    <link rel="stylesheet" href="/styles/main.css">
</head>
<body>
    <!-- Title (Header) -->
    <div id="header"></div>

    <!-- Navigation Bar -->
    <div id="navigation"></div>

    <!-- News Content -->
    <div class="content-bg">
        <section class="news-section">
            <h2>Latest News</h2>
            <div id="news-articles">
                <!-- News articles will be dynamically inserted here -->
            </div>
        </section>
    </div>

    <!-- Footer -->
    <div id="footer"></div>

    <!-- jQuery for injection -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <!-- Include the news data -->
    <script src="/data/saudi-arabia.js"></script>
    <script>
        // Inject Header
        $("#header").load("/includes/header.html");

        // Inject Navigation Bar
        $("#navigation").load("/includes/navigation.html");

        // Inject Footer
        $("#footer").load("/includes/footer.html");

        // Function to render news articles
        function renderNewsArticles() {
            const newsContainer = document.getElementById('news-articles');
            if (!newsContainer) {
                console.error('News container not found');
                return;
            }

            // Check if newsData exists
            if (!window.newsData || !Array.isArray(window.newsData)) {
                console.error('News data not found or invalid');
                newsContainer.innerHTML = '<p>No news articles available.</p>';
                return;
            }

            // Clear the container
            newsContainer.innerHTML = '';

            // Loop through news data and create HTML for each article
            window.newsData.forEach(article => {
                const articleElement = document.createElement('article');
                articleElement.classList.add('news-article');
                articleElement.setAttribute('data-id', article.id);

                articleElement.innerHTML = `
                    <img src="${article.image}" alt="${article.alt}" class="news-image">
                    <div class="news-content">
                        <a href="#${article.id}" class="news-title">${article.title}</a>
                        <div class="news-meta">
                            <span class="news-category">${article.category}</span> | 
                            <span class="news-date">${article.date}</span> | 
                            <span class="news-time">${article.time}</span>
                        </div>
                        <p class="news-excerpt">${article.excerpt}</p>
                        <div class="news-fulltext">${article.fullText}</div>
                    </div>
                `;

                newsContainer.appendChild(articleElement);
            });
        }

        // Run after the DOM is fully loaded
        document.addEventListener('DOMContentLoaded', () => {
            renderNewsArticles();
        });

        // Fallback: Run after window load to ensure data is available
        window.addEventListener('load', () => {
            renderNewsArticles();
        });
    </script>
</body>
</html>
